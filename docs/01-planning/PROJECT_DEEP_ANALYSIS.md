# 📋 桑梓智护 · 心驿耆年 —— 项目深度功能规划

> **文档类型：** 产品功能深度分析与规划  
> **技术栈：** Next.js 16.x + TypeScript (静态导出→WebView APK) | Python + FastAPI | Supabase | 火山引擎AI  
> **创建日期：** 2026-02-25

---

## 一、产品定位与核心命题

### 1.1 一句话定位

> **"一个让老年人张嘴就能用、让家属闭眼就放心的智慧医养助手"**

### 1.2 我们到底在解决什么问题？

通过调研数据的深度挖掘，我们发现老年人面临的不是"缺少一个App"的问题，而是一个**系统性的信息断裂问题**：

```
                    ┌──────────────┐
                    │   老年人      │
                    │  (信息孤岛)   │
                    └──┬───────┬──┘
          "说不清"     │       │    "用不来"
          "记不住"     │       │    "看不见"
                       ▼       ▼
              ┌────────┐     ┌────────┐
              │  医护   │     │  科技   │
              │ 信息    │     │ 产品   │
              │ 传达断裂│     │ 操作壁垒│
              └───┬────┘     └────┬───┘
                  │               │
          "写不清"│    "太复杂"    │"不信任"
          "传不到"│               │"怕出错"
                  ▼               ▼
              ┌────────┐     ┌────────┐
              │  机构   │     │  家属   │
              │(效率低) │     │(焦虑高) │
              └────────┘     └────────┘
```

**核心命题：用AI作为"翻译层"，打通四方信息断裂。**

| 断裂点 | AI翻译作用 | 具体场景 |
|--------|-----------|---------|
| 老人 ↔ 机器 | 语音→指令翻译 | "我要软饭不甜的汤" → `{主食: "软饭", 汤: "无糖"}` |
| 老人 ↔ 医嘱 | 专业→通俗翻译 | "需要限制钠摄入" → "爷爷，今天菜少放点盐" |
| 老人 ↔ 家属 | 碎片→结构化翻译 | 零散健康数据 → "今日爸爸血压正常，已按时吃药" |
| 机构 ↔ 效率 | 手写→数字化翻译 | 手写订餐明细 → 自动标签化数字系统 |

---

## 二、用户角色与使用场景深度分析

### 2.1 四类用户角色画像

#### 👴 角色A：老年人（PRIMARY USER — 核心用户）

**细分人群：**

| 子类型 | 特征 | 占比(估) | 设计策略 |
|--------|------|---------|---------|
| **A1. 能自理型** | 会用智能手机基础功能，能自己记药时间 | ~30% | 语音+大按钮界面 |
| **A2. 半依赖型** | 用老年机或智能机仅打电话，依赖他人管药 | ~45% | 纯语音交互+自动提醒 |
| **A3. 高依赖型** | 不识字、仅能接听电话、认知退化 | ~25% | 一键呼叫+家属远程代操作 |

**关键行为模式（来自调研原话）：**

```
📌 "我一般都是用这个老式的老年机，拿来打电话。用别的功能会比较费力气。"
📌 "很多事情就想让机器人帮忙解决。"
📌 "能直接'说'想要啥就好了，比如对着机器说'我要软饭+不甜的汤'。"
📌 "应该标识的明确一点，想让它干什么就干什么。"
📌 "别弄太多按钮和步骤；字要大、声音要响，能语音控制最好。"
📌 "有时候步骤太复杂吧，懒得用。"
📌 "你说的就挺好，了解点健康知识、提醒我吃药、简单问诊。"
```

**日常场景流（A1能自理型的一天）：**

```
07:00 ── 起床
  │   📱 [自动] 语音播报: "爷爷早上好！今天天气XX度。该吃早上的降压药了。"
  │   👴 按下"已吃药"大按钮 ✅
  │
08:00 ── 早餐
  │   👴 对着手机说: "今天想吃软饭加稀粥"
  │   📱 [AI解析] "已帮您点好：软饭+玉米稀粥。对不对？"
  │   👴 "对" → 订单自动发送食堂
  │
10:00 ── 量血压
  │   👴 量完血压，对手机说: "高压138，低压85"
  │   📱 [记录] "已记录。今天血压偏高一点点，注意少吃咸的。"
  │   📱 [后台] 自动同步给家属端
  │
12:00 ── 午餐
  │   📱 [自动] "爷爷该吃午饭了，今天的餐已经送到了。"
  │
14:00 ── 午休后
  │   👴 "小护，高血压能不能吃花生？"
  │   📱 [AI] "花生可以少量吃，但别吃太咸的花生。具体的话建议问问您的医生。"
  │
18:00 ── 晚药
  │   📱 [语音提醒] "爷爷，该吃晚上的药了，今天的降压药和钙片。"
  │   👴 按"已吃药" ✅
  │
21:00 ── 睡前
  │   📱 [日报发送] 向家属推送今日健康摘要
  │
随时 ── 紧急情况
  │   👴 按红色紧急呼叫按钮 🆘
  │   📱 立即通知值班护工 + 通知家属
```

---

#### 👨‍👩‍👦 角色B：家属（SECONDARY USER — 隐形关键用户）

**核心需求模型：**

```
         ┌─────────────────────┐
         │    家属心理模型      │
         │                     │
         │  "我想知道："        │
         │  ✅ 今天吃药了吗？   │
         │  ✅ 血压正常吗？     │
         │  ✅ 吃的饭合适吗？   │
         │  ✅ 有没有突发状况？ │
         │                     │
         │  "我想做到："        │
         │  🔧 帮爸妈选餐      │
         │  🔧 远程调整提醒    │
         │  🔧 看到实时状态    │
         │  🔧 紧急时被通知    │
         └─────────────────────┘
```

**家属端关键功能场景：**

| 场景 | 触发时机 | 功能 | 频率 |
|------|---------|------|------|
| 早间查看 | 每天上班前看手机 | 昨日健康日报摘要 | 每日 |
| 远程选餐 | 每天/每周 | 帮老人预设餐食偏好 | 高频 |
| 异常告警 | 血压异常/漏吃药 | Push通知+紧急联系 | 低频但关键 |
| 周末关怀 | 探望前查看 | 查看一周健康趋势 | 每周 |
| 设置管理 | 初次/偶尔 | 设置老人的药、饮食禁忌 | 低频 |

---

#### 🏥 角色C：机构工作人员（TERTIARY USER — 效率提升用户）

**包含子角色：**
- **护士/护工**：执行用药提醒、记录健康数据、传达医嘱
- **食堂备餐员**：根据订餐明细备餐
- **机构管理者**：管理入住老人信息

**当前痛点→解决方案映射：**

| 当前痛点 | 调研原話 | 解决方案 |
|---------|---------|---------|
| 手写订餐单 | "字写得急了食堂看不清" | 数字化订餐系统 |
| 备注遗漏 | "忙起来漏看一条" | 特殊需求弹窗提醒 |
| 医嘱传递断裂 | "赶不及通知食堂" | 医嘱→餐食自动关联 |
| 个性化管理费时 | "每天对着20多份明细挨个标" | 标签化自动分类 |

---

#### 🩺 角色D：医护人员（未来扩展用户）

> 当前MVP不纳入医护端，但数据结构需预留。后续可扩展远程医疗、健康数据共享功能。

---

### 2.2 用户关系图

```
                         ┌──────────┐
                    ┌───►│ 机构管理  │◄───┐
                    │    │  (管理端) │    │
                    │    └──────────┘    │
                    │         ▲          │
                管理关系    数据上报    角色管理
                    │         │          │
           ┌───────┴──┐ ┌───┴──────┐ ┌─┴────────┐
           │ 护士/护工 │ │ 食堂      │ │ 系统管理员│
           │(操作端)   │ │(备餐端)   │ │          │
           └─────┬─────┘ └─────┬────┘ └──────────┘
                 │             │
           日常照护        备餐服务
                 │             │
                 ▼             ▼
           ┌──────────────────────┐
           │      👴 老年人       │
           │    (核心用户/语音端) │
           └───────────┬──────────┘
                       │
                  亲属关系                 
                       │
                       ▼
              ┌────────────────┐
              │  👨‍👩‍👦 家属     │
              │  (监护端/代操作)│
              └────────────────┘
```

---

## 三、功能模块深度拆解

### 3.1 功能全景图

```
┌──────────────────────────────────────────────────────────────┐
│                    桑梓智护 功能全景                           │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────────────── 老年人端（语音优先）──────────────┐          │
│  │                                                │          │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐          │          │
│  │  │ 🎙️      │ │ 💊      │ │ 🆘      │          │          │
│  │  │ AI语音  │ │ 用药    │ │ 紧急    │          │          │
│  │  │ 助手    │ │ 管家    │ │ 呼叫    │          │          │
│  │  └─────────┘ └─────────┘ └─────────┘          │          │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐          │          │
│  │  │ 🍚      │ │ ❤️      │ │ 📻      │          │          │
│  │  │ 语音    │ │ 健康    │ │ 健康    │          │          │
│  │  │ 点餐    │ │ 记录    │ │ 广播    │          │          │
│  │  └─────────┘ └─────────┘ └─────────┘          │          │
│  └────────────────────────────────────────────────┘          │
│                                                              │
│  ┌────────────── 家属端（信息中心）──────────────┐            │
│  │                                                │          │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐          │          │
│  │  │ 📊      │ │ 🍽️      │ │ ⚙️      │          │          │
│  │  │ 健康    │ │ 远程    │ │ 远程    │          │          │
│  │  │ 看板    │ │ 选餐    │ │ 设置    │          │          │
│  │  └─────────┘ └─────────┘ └─────────┘          │          │
│  │  ┌─────────┐ ┌─────────┐                       │          │
│  │  │ 🔔      │ │ 📅      │                       │          │
│  │  │ 告警    │ │ 用药    │                       │          │
│  │  │ 通知    │ │ 日历    │                       │          │
│  │  └─────────┘ └─────────┘                       │          │
│  └────────────────────────────────────────────────┘          │
│                                                              │
│  ┌────────────── 后台支撑层 ──────────────────────┐          │
│  │  [火山引擎AI] [Supabase] [FastAPI] [推送服务]    │          │
│  └────────────────────────────────────────────────┘          │
└──────────────────────────────────────────────────────────────┘
```

---

### 3.2 模块 1：🎙️ AI 语音助手（核心差异化功能）

> **调研依据：** "能直接'说'想要啥就好了"、"字少点能说话最好"、"能语音控制最好"

#### 功能特征

| 特征 | 详细说明 |
|------|---------|
| **交互方式** | 大按钮触发 → 说话 → AI理解 → 语音回复 |
| **唤醒方式** | 点击屏幕中央大按钮（非语音唤醒，避免误触发） |
| **对话风格** | 亲切口语化，像孙子女在说话 |
| **回复长度** | ≤ 3句话，关键信息突出 |
| **安全边界** | 涉及用药/治疗：必须加"请咨询医生" |

#### 支持的对话意图

| 意图类别 | 示例语句 | AI行为 |
|---------|---------|--------|
| **健康问答** | "高血压能吃花生吗？" | 口语化回答+安全声明 |
| **用药查询** | "我今天吃了什么药？" | 查询用药记录并语音播报 |
| **点餐** | "中午想吃软饭和清淡的汤" | 解析→生成订单→语音确认 |
| **闲聊陪伴** | "今天真无聊" | 温暖陪聊，推荐养生内容 |
| **紧急求助** | "我头疼/我摔倒了" | 触发紧急流程+安抚语音 |
| **天气查询** | "今天冷不冷？" | 播报天气+穿衣建议 |
| **时间提醒** | "几点了？" | 播报时间+下一个待办 |

#### 技术实现路径

```
用户说话 ──→ 前端录音(MediaRecorder API)
         ──→ 上传音频至 FastAPI
         ──→ 火山引擎 ASR 语音识别
         ──→ 豆包大模型 意图理解+生成回复
         ──→ 火山引擎 TTS 语音合成
         ──→ 前端播放语音回复

耗时预估：2-4s（需优化到<3s体验最佳）
```

#### 方言支持策略

| 阶段 | 支持方言 | 依据 |
|------|---------|------|
| MVP | 普通话（含口音） | 火山引擎默认支持 |
| V1.1 | 西南官话（四川/贵州） | 调研地区覆盖 |
| V1.2 | 更多方言 | 按用户反馈扩展 |

---

### 3.3 模块 2：💊 用药管家

> **调研依据：** "提醒我吃药"、"吃药我们不识字孩子又离得远，一般就是工作人员帮忙看吃什么，但时间还是自己记得"

#### 功能特征

| 功能点 | 老年人端 | 家属端 |
|--------|---------|--------|
| **定时提醒** | 语音播报"该吃XX药了" + 大按钮确认 | 查看老人是否按时吃药 |
| **漏药告警** | 超时15分钟再次提醒 + 振动 | 推送通知"爸爸可能忘吃药了" |
| **用药记录** | 可语音查询"今天吃了什么药" | 完整用药日历视图 |
| **药品管理** | - | 录入/修改用药计划（代操作） |
| **禁忌提醒** | 语音回答"XX药能和XX一起吃吗" | 查看禁忌列表 |

#### 用药提醒流程

```
                    ┌──────────────┐
                    │  定时触发     │
                    │ (scheduled)  │
                    └──────┬───────┘
                           │
                    ┌──────▼───────┐
                    │  语音播报     │
                    │ "该吃降压药了"│
                    └──────┬───────┘
                           │
                 ┌─────────┼──────────┐
                 │         │          │
          ┌──────▼──┐ ┌───▼────┐ ┌──▼──────┐
          │ 按"已吃" │ │ 15分钟  │ │ 30分钟   │
          │   ✅     │ │ 无响应  │ │ 无响应   │
          └─────────┘ │ 再次提醒│ │ 标记Miss │
                      └───┬────┘ │ 通知家属 │
                          │      └────┬─────┘
                          │           │
                    ┌─────▼───┐ ┌────▼────┐
                    │ 按"已吃" │ │ 通知护工 │
                    │   ✅     │ │ + 家属   │
                    └─────────┘ └─────────┘
```

#### 数据模型要点

- 支持**多时段用药**：早/中/晚/睡前
- 支持**药物间隔规则**：如"饭后30分钟"
- 记录**实际服药时间 vs 计划时间**的偏差
- 家属可**远程设置/修改**用药计划

---

### 3.4 模块 3：🆘 紧急呼叫

> **调研依据：** "一按就有人过来"——一键呼叫器是唯一高接受度设备

#### 功能特征

| 特征 | 说明 |
|------|------|
| **入口** | 全局悬浮红色大按钮（所有页面可见） |
| **触发方式** | 单击触发（无需确认——紧急情况不能加门槛） |
| **呼叫流程** | ① 即时振动+高频声音反馈 ② 自动通知值班护工 ③ 同时通知主要家属 |
| **信息发送** | 附带GPS定位 + 用户基本信息 + 最近健康数据 |
| **误触保护** | 呼叫后10秒内可取消（但默认送达） |
| **通话能力** | 可选一键拨打预设紧急电话 |

#### 紧急级别

| 级别 | 触发条件 | 响应 |
|------|---------|------|
| 🔴 **一级紧急** | 用户主动触发 | 通知护工+家属+可选120 |
| 🟡 **二级警告** | 血压异常值检测 | 通知护工+家属 |
| 🟢 **三级提醒** | 漏吃药30分钟+ | 通知家属 |

---

### 3.5 模块 4：🍚 语音点餐

> **调研依据：** "能直接'说'想要啥就好了，比如对着机器说'我要软饭+不甜的汤'"

#### 功能特征

| 特征 | 说明 |
|------|------|
| **交互方式** | 老人语音描述 → AI解析 → 语音确认 → 下单 |
| **智能标签** | 自动从语音中提取标签：`[软饭, 无糖, 剪碎, 低盐...]` |
| **医嘱关联** | 自动根据老人的慢性病/药物标记禁忌标签 |
| **家属代下** | 家属可远程帮老人选餐 |
| **备餐端显示** | 食堂屏幕直接显示"12床：软饭+无糖汤+剪碎肉丝" |

#### AI解析流程

```
语音输入: "我要软的饭，汤不甜的，菜帮我弄碎"
                        │
                   ┌────▼─────┐
                   │ ASR识别   │
                   │ 火山引擎  │
                   └────┬─────┘
                        │
              文本: "我要软的饭汤不甜的菜帮我弄碎"
                        │
                   ┌────▼─────┐
                   │ LLM解析   │  + 用户medical_profile
                   │ 意图提取  │  (医嘱: 糖尿病→无糖)
                   └────┬─────┘
                        │
              结构化: {
                主食: "软饭",
                汤: "无糖",
                菜: "剪碎",
                自动标签: ["糖尿病饮食"]  ← 从medical_profile自动添加
              }
                        │
                   ┌────▼─────┐
                   │ 语音确认   │
                   │ "已点好：  │
                   │ 软饭+无糖汤│
                   │ +剪碎菜。  │
                   │ 对不对？"  │
                   └────┬─────┘
                        │
                   用户: "对"
                        │
                   ┌────▼─────┐
                   │ 提交订单   │
                   │ → Supabase│
                   └──────────┘
```

---

### 3.6 模块 5：❤️ 健康记录

> **调研依据：** "我希望有一个能够在手机上能看到父母健康状况的软件"

#### 功能特征

| 功能点 | 老年人端 | 家属端 |
|--------|---------|--------|
| **数据录入** | 语音录入"高压135低压88" | 也可手动录入 |
| **趋势查看** | 大字显示最近值 | 折线图+趋势分析 |
| **异常标记** | AI语音提示"今天血压偏高" | 推送异常告警 |
| **AI日报** | - | 每日自动生成健康摘要 |
| **数据类型** | 血压、血糖、心率、体重 | 全部可查 |

#### AI健康日报示例（发送给家属）

```
📋 爸爸今日健康日报 (2026-02-25)

✅ 用药：3次全部按时服药
📊 血压：早 135/85 正常 | 晚 142/90 ⚠️偏高
🍚 餐食：软饭+清淡菜 ✅符合糖尿病饮食
💬 活跃度：使用AI助手3次（问了养生问题、点了餐）
😊 整体状态：良好

💡 建议：晚间血压偏高，可提醒爸爸晚餐少吃点盐。
```

---

### 3.7 模块 6：📻 健康广播

> **调研依据：** "了解点健康知识"、"绝大多数内容以音频形式来呈现会让老年群体更容易接受"

#### 功能特征

| 特征 | 说明 |
|------|------|
| **呈现形式** | 纯音频播放（类似收音机/播客） |
| **内容来源** | AI根据老人慢性病生成个性化健康知识 |
| **播放方式** | 大按钮"播放" / "暂停" / "下一条" |
| **内容类型** | 养生常识、饮食注意、运动建议、季节保健 |
| **AI个性化** | 糖尿病老人 → 重点推送控糖饮食知识 |

---

## 四、产品特征体系（What Makes This Different?）

### 4.1 六大核心特征

#### 特征 1：🗣️ 语音第一（Voice-First）

> **不是"支持语音"，而是"只需要语音"**

| 维度 | 传统App | 本产品 |
|------|--------|--------|
| 主交互 | 触控点击 | 语音对话 |
| 文字角色 | 承载信息 | 仅辅助/可选 |
| 输入方式 | 键盘打字 | 说话 |
| 反馈方式 | 视觉弹窗 | 语音播报 |
| 学习成本 | 需记忆操作路径 | 说出需求即可 |

**实现规范：**
- 所有核心功能必须可纯语音完成
- 所有系统反馈必须有语音播报
- 任何文字内容旁都有"朗读"按钮
- 健康知识以音频为主载体

---

#### 特征 2：📐 极致简单（Radical Simplicity）

> **一键呼叫器的设计哲学扩展到整个App**

| 设计原则 | 实现方式 |
|---------|---------|
| ≤ 3步完成任务 | 任何核心操作都在3次点击内完成 |
| 首页 ≤ 4个入口 | 仅展示最核心的功能大按钮 |
| 零文字输入 | 所有老年人端输入通过语音完成 |
| 一屏一任务 | 每个页面只做一件事 |
| 永远可返回 | 左上角始终有大"返回"按钮 |

**首页设计（老年人端）：**

```
    ┌─────────────────────┐
    │                     │
    │   桑梓智护 早上好！  │  ← 问候语+天气
    │   今天 25°C 晴       │
    │                     │
    │  ┌───────────────┐  │
    │  │   🎙️           │  │
    │  │   和我说话      │  │  ← 最大的按钮，占屏幕1/3
    │  │  (按住说话)     │  │
    │  └───────────────┘  │
    │                     │
    │  ┌──────┐ ┌──────┐  │
    │  │ 💊   │ │ 🍚   │  │
    │  │ 吃药 │ │ 点餐 │  │  ← 两个大按钮并排
    │  └──────┘ └──────┘  │
    │                     │
    │  ┌──────┐ ┌──────┐  │
    │  │ ❤️   │ │ 📻   │  │
    │  │ 健康 │ │ 广播 │  │  ← 两个大按钮并排
    │  └──────┘ └──────┘  │
    │                     │
    │       🆘             │  ← 悬浮紧急按钮（始终可见）
    └─────────────────────┘
```

---

#### 特征 3：👥 双端联动（Elder-Family Sync）

> **老年人端做操作，家属端做管理，数据实时同步**

| 同步项 | 老年人端动作 | 家属端反馈 |
|--------|------------|----------|
| 吃药 | 点击"已吃" | 实时状态更新 ✅ |
| 血压 | 语音录入数值 | 数据同步+趋势图 |
| 点餐 | 语音点餐 | 查看/审核订单 |
| 紧急 | 按紧急按钮 | 即时Push通知 |
| AI问答 | 语音对话 | 可查看对话记录 |

**家属代操作能力：**
- ✅ 帮老人设置/修改用药计划
- ✅ 远程帮老人选餐
- ✅ 调整老人的无障碍设置（字体大小、语速等）
- ✅ 设置紧急联系人名单

---

#### 特征 4：🧠 AI温度化（Warm AI）

> **AI不说"根据数据分析..."，AI说"爷爷，今天血压还不错！"**

| AI维度 | 冷冰冰的AI | 有温度的AI（本产品） |
|--------|-----------|-------------------|
| 称呼 | "用户ID:123" | "爷爷/奶奶" |
| 语气 | "请确认操作" | "好嘞，已帮您记下了" |
| 安慰 | 无 | "您别担心，这个很正常" |
| 建议 | "建议降低钠摄入量" | "今天菜少放点盐就行啦" |
| 错误 | "输入格式错误" | "没听清呢，您再说一遍？" |

**AI人格设定（System Prompt核心）：**

```
你是"小护"，一个贴心的健康小助手。
你的性格是：像孙子女一样亲切、耐心、温暖。
你的原则是：
1. 简短（每次≤3句话）
2. 通俗（不用任何医学术语）
3. 安全（涉及治疗说"问问您的医生"）
4. 温暖（常用"您放心"、"慢慢来"）
5. 实用（回答要包含可执行的建议）
```

---

#### 特征 5：🛡️ 容错安全（Error-Safe）

> **老年人操作——每一次误操都不应该产生害**

| 容错机制 | 说明 |
|---------|------|
| **二次确认** | 关键操作（点餐/改药）用语音确认"对不对？" |
| **可撤销** | 所有操作10秒内支持"我说错了/取消" |
| **兜底守护** | 紧急呼叫无需取消（宁可误报不可漏报）|
| **默认安全** | 不识别的语音不执行，而是"没听清，再说一遍" |
| **离线保护** | 断网时核心功能（紧急呼叫）走原生电话 |

---

#### 特征 6：📊 适应性设置（Adaptive Config）

> **一个App，适应三种老年人子类型**

| 设置项 | A1自理型 | A2半依赖型 | A3高依赖型 |
|--------|---------|-----------|-----------|
| 界面模式 | 标准大字 | 超大字+纯语音 | 一键模式 |
| 首页入口 | 6个功能 | 4个功能 | 2个(呼叫+语音) |
| 输入方式 | 语音+点击 | 纯语音 | 家属远程代操作 |
| 提醒强度 | 语音提醒 | 语音+振动 | 语音+振动+通知家属 |
| 操作复杂度 | 3步完成 | 2步完成 | 1步完成 |

---

## 五、信息架构与页面清单

### 5.1 老年人端信息架构

```
首页 [/]
├── 🎙️ 语音助手 [/voice]
│   └── 对话历史 [/voice/history]（可选）
│
├── 💊 吃药提醒 [/medicine]
│   ├── 今日用药 [/medicine]（默认）
│   └── 已吃药确认 [/medicine/confirm]
│
├── 🍚 点餐 [/meal]
│   ├── 语音点餐 [/meal]（默认）
│   └── 今日餐食 [/meal/today]
│
├── ❤️ 健康 [/health]
│   ├── 录入数据 [/health]（语音录入）
│   └── 我的数据 [/health/records]（大字显示）
│
├── 📻 健康广播 [/radio]
│   └── 播放列表 [/radio]
│
└── 🆘 紧急呼叫 [全局FAB]
```

### 5.2 家属端信息架构

```
首页/看板 [/family]
├── 📊 健康看板 [/family]（默认）
│   ├── 今日摘要
│   ├── 用药状态
│   └── 血压/血糖趋势
│
├── 🍽️ 餐食管理 [/family/meal]
│   ├── 今日餐食查看
│   └── 帮爸妈选餐
│
├── 💊 用药管理 [/family/medicine]
│   ├── 用药日历
│   ├── 新增/修改用药计划
│   └── 服药记录
│
├── 🔔 通知中心 [/family/notifications]
│   ├── 异常告警
│   ├── 漏药提醒
│   └── 紧急呼叫记录
│
└── ⚙️ 设置 [/family/settings]
    ├── 绑定/管理老人
    ├── 无障碍设置（代老人设置）
    ├── 紧急联系人
    └── 饮食禁忌管理
```

### 5.3 页面总数统计

| 端 | 页面数 | 交互复杂度 |
|----|--------|----------|
| 老年人端 | ~8页 | 极低（大按钮+语音） |
| 家属端 | ~12页 | 中等（标准移动端交互） |
| **合计** | **~20页** | - |

---

## 六、技术特征与实现约束

### 6.1 Next.js 16.x 静态导出关键约束

```typescript
// ⚠️ 关键限制：output: 'export' 模式下不可用的特性
const STATIC_EXPORT_LIMITATIONS = {
  // ❌ 不可用
  serverComponents: false,      // 没有服务端组件
  serverActions: false,         // 没有Server Actions
  imageOptimization: false,     // 没有<Image>优化
  middleware: false,             // 没有中间件
  revalidation: false,          // 没有ISR/SSR
  apiRoutes: false,              // 没有API Routes（API全部走FastAPI）

  // ✅ 可用
  clientComponents: true,       // 所有组件都是 'use client'
  appRouter: true,               // App Router目录结构
  cssModules: true,              // CSS Modules
  dynamicImport: true,           // 动态导入
  staticGeneration: true,        // 静态生成
};
```

**这意味着：**
1. 所有页面都是**客户端渲染**（CSR）
2. 数据获取通过 `fetch` 调用 FastAPI 后端
3. 认证状态存储在 `localStorage` + Supabase Auth Token
4. 路由是纯前端路由（hash路由或 trailingSlash 文件路由）

### 6.2 WebView兼容性清单

| 技术 | WebView支持 | 注意事项 |
|------|------------|---------|
| MediaRecorder API | ✅ Android 5+ | 语音录入核心API |
| Web Audio API | ✅ | 语音播放 |
| LocalStorage | ✅ | 离线数据缓存 |
| Service Worker | ⚠️ 需配置 | WebView需显式启用 |
| Geolocation | ✅ 需权限 | 紧急呼叫定位 |
| Vibration API | ✅ | 触觉反馈 |
| Push Notification | ❌ Web Push | 需要原生层桥接 |
| 拨打电话 | ✅ `tel:` scheme | 紧急呼叫兜底 |

### 6.3 离线策略

```
         在线状态                     离线状态
    ┌──────────────┐            ┌──────────────┐
    │ 正常API调用   │            │ 本地缓存读取  │
    │ 实时数据同步  │    网络    │ 核心功能可用  │
    │ AI语音对话   │ ── 断开 ──→│ AI不可用     │
    │ 推送通知     │            │ 紧急呼叫→拨号 │
    │ 全功能       │            │ 用药提醒→本地 │
    └──────────────┘            └──────┬───────┘
                                       │
                                 网络恢复
                                       │
                                ┌──────▼───────┐
                                │ 自动同步      │
                                │ 离线数据上传  │
                                │ 恢复全功能    │
                                └──────────────┘
```

**离线可用功能（缓存策略）：**
- ✅ 用药提醒（Service Worker + 本地闹钟）
- ✅ 紧急呼叫（降级为原生拨号 `tel:120`）
- ✅ 查看已缓存的健康数据
- ❌ AI语音对话（依赖后端）
- ❌ 语音点餐（依赖后端）
- ❌ 推送通知（依赖后端）

---

## 七、竞品分析与差异化

### 7.1 市场现有方案对比

| 维度 | 微信健康 | 京东/美团买药 | 各类健康App | **桑梓智护** |
|------|---------|-------------|-----------|------------|
| **目标人群** | 全年龄 | 全年龄 | 中青年为主 | **专注65+老年人** |
| **交互方式** | 触控+文字 | 触控+文字 | 触控+文字 | **语音优先** |
| **适老化** | 大字模式(有限) | 有大字版 | 几乎没有 | **原生适老化设计** |
| **AI能力** | 基础问答 | 无 | 部分有 | **语音AI全流程** |
| **家属联动** | 微信群 | 无 | 无/基础 | **深度双端联动** |
| **机构适配** | 无 | 无 | 无 | **支持养老机构** |
| **用药管理** | 无 | 买药 | 有 | **语音提醒+家属监督** |
| **心理陪伴** | 无 | 无 | 无 | **AI温度化陪伴** |

### 7.2 核心竞争壁垒

```
┌─────────────────────────────────────────────┐
│           桑梓智护的竞争壁垒                   │
│                                             │
│  1. 🎙️ 语音第一的全流程设计                   │
│     (不是"加个语音功能"，而是"整个操作依靠语音")│
│                                             │
│  2. 👥 老年人-家属-机构 三方联动               │
│     (不是单点工具，而是生态闭环)               │
│                                             │
│  3. 🧠 基于实地调研的精准需求理解              │
│     (不是"我觉得老年人需要"，而是"他们说需要")  │
│                                             │
│  4. 🏥 养老机构场景适配                       │
│     (点餐系统、医嘱关联等B端能力)              │
│                                             │
│  5. 💗 AI温度化而非技术化                     │
│     (说人话，不说机器话)                       │
└─────────────────────────────────────────────┘
```

---

## 八、开发路线图建议

### 8.1 三阶段规划

```
Phase 1: 核心验证 (4周)          Phase 2: 价值扩展 (4周)        Phase 3: 生态完善 (4周)
┌──────────────────────┐    ┌──────────────────────┐    ┌──────────────────────┐
│ ✅ 用户注册/登录       │    │ ✅ 语音点餐             │    │ ✅ 机构管理端           │
│   (手机号+验证码)      │    │   (语音→AI解析→下单)   │    │   (护士/备餐端)         │
│ ✅ 家属绑定            │    │ ✅ 健康广播             │    │ ✅ 医嘱-餐食关联        │
│ ✅ AI语音助手          │    │   (AI生成音频健康知识)  │    │ ✅ 数据分析/统计        │
│   (基础问答+陪聊)      │    │ ✅ AI健康日报           │    │ ✅ 方言扩展             │
│ ✅ 用药提醒            │    │   (每日自动生成)        │    │ ✅ 高级适应性设置       │
│   (语音提醒+确认)      │    │ ✅ 远程选餐             │    │ ✅ 运营数据看板         │
│ ✅ 紧急呼叫            │    │   (家属代操作)          │    │                        │
│ ✅ 健康记录            │    │ ✅ 高对比度模式         │    │                        │
│   (语音录入血压/血糖)  │    │ ✅ 异常告警Push         │    │                        │
│ ✅ 家属健康看板        │    │                         │    │                        │
├──────────────────────┤    ├──────────────────────┤    ├──────────────────────┤
│ 🎯 验证: 老年人能否    │    │ 🎯 验证: 餐食/广播     │    │ 🎯 验证: 机构采购价值   │
│ 独立完成语音吃药流程   │    │ 场景是否有商业价值     │    │ 可规模化复制          │
└──────────────────────┘    └──────────────────────┘    └──────────────────────┘
```

---

## 九、关键风险与应对

| 风险 | 概率 | 影响 | 应对策略 |
|------|------|------|---------|
| 语音识别准确率不够 | 中 | 高 | 多轮确认+文字辅助兜底 |
| 老年人拒绝使用新设备 | 高 | 高 | 极简设计+家属引导+养老院培训 |
| WebView性能不足 | 低 | 中 | 静态文件本地加载+代码分割 |
| 方言识别差 | 中 | 中 | MVP阶段仅支持普通话，后续扩展 |
| 火山引擎API稳定性 | 低 | 高 | 本地缓存+降级方案(如紧急呼叫走原生) |
| 隐私安全合规 | 中 | 高 | 健康数据加密存储+Supabase RLS |
| 养老机构合作意愿 | 中 | 中 | 先做C端验证，再推机构端 |

---

*本文档为项目功能的深度分析，是后续编写正式 `PROJECT_PLAN.md` 的输入前提。*
